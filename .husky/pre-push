#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo ""
echo "🔍 [husky] pre-push (non-bloquant) ..."

# Check Expo deps (jamais bloquant)
CI=1 npx expo install --check >/dev/null 2>&1 \
  && echo "📦 Expo deps OK" \
  || echo "⚠️ Expo deps check a échoué (ignoré)"

# Lint (non-bloquant)
npm run lint --silent >/dev/null 2>&1 \
  && echo "🧹 Lint OK" \
  || echo "⚠️ Lint en erreur (ignoré)"

# Tests (non-bloquant)
npm test -- --watchAll=false >/dev/null 2>&1 \
  && echo "🧪 Tests OK" \
  || echo "⚠️ Tests en erreur (ignoré)"

echo "✅ [husky] tout est non-bloquant. Push autorisé."
