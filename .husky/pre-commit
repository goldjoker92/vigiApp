#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "üßπ [husky] Auto-fix Prettier + ESLint (commit non bloqu√©)..."

# Tente yarn, sinon npx. Toujours non bloquant.
if command -v yarn >/dev/null 2>&1; then
  yarn lint-staged && ok=1 || ok=0
elif command -v npx >/dev/null 2>&1; then
  npx lint-staged && ok=1 || ok=0
else
  echo "‚ö†Ô∏è Ni yarn ni npx trouv√©s ‚Äî skip auto-fix."
  ok=0
fi

if [ "$ok" -eq 1 ]; then
  echo "‚úÖ Fichiers corrig√©s (lint-staged)"
else
  echo "‚ö†Ô∏è Auto-fix termin√© avec des erreurs (commit non bloqu√©)"
fi

exit 0
